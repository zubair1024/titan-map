# PostgreSQL tuning for Nominatim on low-memory servers
# This overrides the default postgres-import.conf settings
# Suitable for servers with 2-4 GB RAM and medium datasets (Zimbabwe = 166 MB)

# Shared memory - CRITICAL: Keep low for memory-constrained servers
shared_buffers = 256MB

# Per-query work memory
work_mem = 32MB

# Maintenance operations memory
maintenance_work_mem = 64MB

# Planner's assumption for disk cache
effective_cache_size = 512MB

# Connection limits
max_connections = 20

# Write-ahead log
wal_buffers = 8MB
checkpoint_completion_target = 0.9

# Query planner
random_page_cost = 1.1
effective_io_concurrency = 200

# Logging (minimal for production)
log_min_duration_statement = 1000
